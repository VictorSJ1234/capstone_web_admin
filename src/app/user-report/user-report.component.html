<app-header></app-header>
<app-navbar></app-navbar>
<app-sidenav></app-sidenav>

<body>
    <section class="label_section">
        <div class="label_container">
            <h1>Accounts Managements > User Reports</h1>
        </div>
    </section>
    <section class="report_list_section">
        <div class="report_list_container">
            <div class="report_list_header">
                <h2>User Reports List</h2>
                <div class="search_report">
                    Search Report
                    <div class="search_input">
                        <input type="text">
                        <button class="search_button">
                            <img src="../../assets/user_report_images/search1.png" alt="Search">
                        </button>
                    </div>
                </div>
                <div class="sort_report">
                    Sort Report
                    <div class="sort_input">
                        <select class="sort-select">
                            <option value="date">Date</option>
                            <option value="status">Status</option>
                            <option value="name">Name</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="user_information_row">
                <img [src]="image" alt="User Image">
                <div class="username_and_name">
                    Name
                    <p><span>{{userData.name}}</span></p>
                </div>
                <div class="barangay">
                    &nbsp;
                    <p><b>Barangay: </b><span>{{userData.barangay}}</span></p>
                </div>

            </div>
            <table class="report_table">
                <tbody>
                    <tr *ngIf="reports.length === 0">
                        <td colspan="3" class="no-reports-cell">
                            No reports yet
                        </td>
                    </tr>
                    <tr *ngFor="let report of reports; ; let i = index">
                        <td class="first_column">
                            <div class="column1">
                                <b>Report #{{ i + 1 }}</b> 
                                <img src="../../assets/user_report_images/report_icon.png" alt="Report Image">
                                <b>Report ID#</b> <br>
                                {{report.reportId}}
                            </div>
                        </td>
                        <td>
                            <div class="column2">
                                <p class="subject_text"><b>Subject:&nbsp;</b><span >{{ report.report_subject}}</span></p>
                                <p class="date"><b>Date:&nbsp;</b><span class="date_text">{{report.formattedDate}}</span></p>
                            </div>
                        </td>
                        <td class="button_column">
                            <div class="column3">
                                <button (click)="openReport(report)" id="open_button">Open</button>
                                <button (click)="openCarouselModal(report)" id="delete_button">Delete</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section> 

    <!-- Modal -->
    <div id="response_modal" class="modal" [ngStyle]="{ display: carouselModalOpen ? 'block' : 'none' }">
        <div class="modal-content">
          <div class="modal-header" id="modal_header">
            <span class="close" id="close_carousel" (click)="closeCarouselModal()">&times;</span>
            <h2>Are you sure?</h2>
          </div>
          
          <div class="modal-body">
            <p>Confirm to delete report:</p>
            <p>{{ selectedReportId2 }}</p>
            <div class="redirect-button-container">
                <button class="cancel-button" (click)="closeCarouselModal()">Cancel</button> <!-- Close modal on cancel -->
                <button class="confirm-button" (click)="confirmDelete()">Confirm</button> <!-- Perform delete on confirm -->
            </div>
          </div>
        </div>
      </div>   
<body>